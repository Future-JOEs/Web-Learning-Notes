# 浏览器渲染机制

## 浏览器内核

浏览器核心“Rendering Engine”（解释引擎/渲染引擎），国内一般称之为浏览器内核

- Gecko ：

  Mozilla公司FireFox浏览器使用的内核，前身是netscape（网景）公司，我愿称之为浏览器先驱，被邪恶的微软打压（浏览器大战），一怒之下宣布免费并公开其源代码，造福全世界开发者，2008年退出历史舞台，但是其内核仍在火狐浏览器上发光发热

  >浏览器大战引发的另一个问题，w3c标准的滞后和浏览器厂家突飞猛进的迭代版本产生的冲突，这方面谷歌就比较聪明

- Trident：

  IE浏览器使用的内核，人人喊打，已被微软放弃，也未开源

- webkit：

  由苹果公司开发，用于自家浏览器Safari，由于借鉴了开源项目KHTML和KJS，所以也是开源的，谷歌以此开发了chromium项目，而chrom是基于chromium开发的beta版

  >你需要搞标准是吧，那我是绝对支持的，不过你看啊， 现在是移动互联网时代，很多东西需要重新制定对吧？我们来制定新标准吧。 于是 Google, Mozilla , Opera 纷纷开始提新标准提议。  只是Google 和其他人不同的地方在于， Google 有安卓手机浏览器作为入口 ，同时也在大规模的推广 Chrome.  所以Google 并没有提个提议，然后傻傻的等着 W3C 这帮老古董批准，而是加上CSS 前缀 直接放在安卓浏览器和 chrome 里面， 提前发布给开发者使用。 理由也很充分： 我提了一个提议， 我总要看看广大开发者买不买帐啊， 所以加个前缀放在浏览器里面也是很合理是不？我的浏览器本身可是完全标准的哦。 
  >
  >于是就变成了，Google 提的提议，不需要等 W3C, 加个前缀 -webkit-- 放在 Chrome 里面，广大开发人员由于安卓和Chrome用户的快速增长只能纷纷响应，适配，反过来又可以给 W3C 压力，利用事实标准快速促成实际标准。而Firefox 也可以提一个解决同样问题的提议，加个 --moz-放到 Firefox,  Opera 只能 MMP, 你们两个谐星， 你说我支持吧，这个又不是标准，说不定标准还会改，就算支持，尼玛我支持哪个啊。 你说我不支持吧， 网页已经开始用了，用户可是拿脚投票的。 

  - blink

    谷歌和苹果分道扬镳，你搞你的webkit2，我搞我的blink，但是本质都是来源于webkit

- Presto

  Opera采用的内核，渲染速度比Trident和Gecko要快，据说因为苹果硬件和一般pc机不同，所以测试的时候没带webkit一起玩。但是其性能确实是公认的棒，据说同时开200个tab跟玩似的，但是其他浏览器可能就不太行了，不过挺搞笑的是Opera现在最新的版本已经放弃了presto也转而使用webkit了

  

浏览器内核包含了两个部分，一个是gui渲染引擎，另一个是js引擎，v8就是js引擎，当然v8就是chromium的一部分，chromium保留了webkit的GUI渲染引擎webcore，就是基于KHTML而来的渲染引擎，而没有沿用webkit的jscore，自己研发了大名鼎鼎的v8

这里重点强调一下chroumium的牛逼之处

**WebKit功能模块:**

1. HTML解析:负责HTML语言的解析
2. CSS解析：负责CSS的解析工作
3. 图片解码：支持不同编码格式的图片
4. JavaScript引擎：JavaScript语言的解析引擎，缺省的是JavaScriptCore，但是目前Google 的V8 JavaScript被广泛使用
5. 正则表达式
6. 布局：负责布局(layout)的计算和更新工作
7. 文档对象模型(DOM)：DOM是W3C定义的对象模型，该部分负责DOM树及其相应的接口
8. 渲染：与渲染相关的基础设施，例如渲染树，渲染层次树等等
9. SVG：对SVG的支持
10. XML解析：XML语言的解析
11. XSLT：XSLT语言的解析执行
12. URL解析器：URL规范的解析
13. Unicode编解码器：各种编码解码工作
14. 移植：WebKit中比较大的一部分，因为WebKit要工作需要不同平台上有具体的实现，因而不同的移植有不同的实现。chromium的移植很复杂，因为其支持跨平台，所以它的移植需要在windows，linux和mac上工作。

由上面的模块大致可以WebKit主要是跟网页的解析和渲染相关的工作，其不涉及浏览器的历史，书签，下载，cookie管理等等方面的工作。

**Chromium:**

1. URL解析器：同WebKit
2. gui解析渲染（html、css图片等）：同webkit
3. Unicode编解码器：同WebKit
4. js解析器：v8
5. Cookie管理器：cookie生命周期的管理
6. 历史管理器：历史记录的管理
7. 密码管理器：网页中密码登录信息管理
8. 窗口管理：多个Tab窗口的管理和切换
9. 地址栏：地址栏功能，智能地址填充与书签的协同工作
10. 安全浏览黑名单管理：安全浏览机制
11. 网络栈：与网络传输相关的工作，其有很多创新的东西
12. SSL/TLS：网络传输安全
13. 磁盘缓存：磁盘缓存页面及其替换策略等生命周期的管理
14. 下载管理器：管理下载相关
15. 粘帖板：clipboard的功能
16. 书签管理：书签的组织和管理

除此之外：比较高端的东西， 沙箱模型，NaCl，扩展机制，硬件加速架 ，但是我都不懂，并不妨碍听起来就很牛逼

 浏览器内核和浏览器的关系

拿chrom和uc举例

uc我没找到系统的资料，但是我作为一个uc用户说一下感受，小视频观看体验极佳~

分辨浏览器是否自研，自研程度有多少，看他的内核到底是webkit还是chromium

中科院 浏览器 拆包 chromium源代码

## 浏览器渲染机制





# 参考资料

[如何评价 Opera 浏览器弃用自家 Presto 引擎转用 WebKit？ - 罗志宇的回答 - 知乎](https://www.zhihu.com/question/20776481/answer/478754198 ) 

[理解WEBKIT和CHROMIUM系列](https://www.cnblogs.com/qq499194341/articles/2917432.html)

[不同内核浏览器的差异以及浏览器渲染简介](https://www.cnblogs.com/ada-zheng/p/4308581.html)